<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>EntityManipulatorExample: EntityManipulator demonstration</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">EntityManipulatorExample
   </div>
   <div id="projectbrief">Demo on UML class models, design patterns and code</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div id="doc-content">
<div><div class="header">
  <div class="headertitle"><div class="title">EntityManipulator demonstration</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This project is meant to demonstrate the relationships between UML class diagrams and C++ code.</p>
<p>See the included png file for the class diagram, and study the code to see how the class diagram and code relate to each other. Note that three design patterns have been implemented in the app &ndash; <a href="https://en.wikipedia.org/wiki/Composite_pattern">Composite</a>, <a href="https://en.wikipedia.org/wiki/Visitor_pattern">Visitor</a> and <a href="https://en.wikipedia.org/wiki/Prototype_pattern">Prototype</a>.</p>
<p><img src="UML-class-diagram-of-EntityManipulator.png" alt="UML class diagram" class="inline"/></p>
<p>In the <code>main.cpp</code> an object structure is created. Then code demonstrates three ways (JSON, XML, GraphViz DOT file) to externalize the object structure into a stream using <em>marshallers</em>. The object structure looks like this:</p>
<div class="fragment"><div class="line">             customers</div>
<div class="line">          /              \</div>
<div class="line">    customer             customer   ______</div>
<div class="line">    FooBar Ltd__         Antti Juustila   \_</div>
<div class="line">   /   |  \     \            /  |   \        \</div>
<div class="line">id  type street billing    id   type   home   work</div>
<div class="line">          addr   addr                  addr     addr</div>
<div class="line">    </div>
<div class="line">Where street, billing, home and work addresses have details (street name, post number etc).</div>
</div><!-- fragment --><h1>Building and running the app</h1>
<p>If you wish, you can build the app and run it to see how it works.</p>
<p>What you need is a C++ compiler and <a href="https://cmake.org">CMake</a> build system.</p>
<p>After installing the tools, do this in the project root directory:</p>
<ol type="1">
<li>mkdir build</li>
<li>cd build</li>
<li>cmake ..</li>
<li>make</li>
</ol>
<p>Or, if using <a href="https://ninja-build.org">Ninja</a>:</p>
<div class="fragment"><div class="line">mkdir ninja</div>
<div class="line">cd ninja</div>
<div class="line">cmake -GNinja ..</div>
<div class="line">ninja</div>
</div><!-- fragment --><p>After this, you should have a binary executable <code>EntityManipulatorExe</code> in the build directory.</p>
<p>You can then execute it <code>./EntityManipulatorExe</code> and see the results (below). Additionally, the executable creates a <code>graph.gv</code> file containing a <a href="https://www.graphviz.org">GraphViz DOT</a> file representation of the object structure. If you install GraphViz (<code>sudo apt-get install graphviz</code> on Ubuntu, or on macOS, using homebrew: <code>brew install graphviz</code>), you can run the DOT tool to view the graph, for example:</p>
<div class="fragment"><div class="line">dot -Tpng graph.gv -ograph.png</div>
</div><!-- fragment --><p> Creating a png file which looks like this:</p>
<p><img src="graph.png" alt="GraphViz generated png file" class="inline"/></p>
<p>Below you can see the output of the app when executed.</p>
<div class="fragment"><div class="line">OY1902105:ninja juustila$ ./EntityManipulatorExe </div>
<div class="line">Marshal objects to XML...</div>
<div class="line"> </div>
<div class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</div>
<div class="line">&lt;customers&gt;</div>
<div class="line">   &lt;customer customer-identifier=&quot;Key customer&quot;&gt;</div>
<div class="line">      &lt;name&gt;FooBar Ltd&lt;/name&gt;</div>
<div class="line">      &lt;id&gt;9897765&lt;/id&gt;</div>
<div class="line">      &lt;type&gt;Company&lt;/type&gt;</div>
<div class="line">      &lt;addresses&gt;</div>
<div class="line">         &lt;address address-identifier=&quot;Billing&quot;&gt;</div>
<div class="line">            &lt;street&gt;Technovillage Post Office&lt;/street&gt;</div>
<div class="line">            &lt;postnumber&gt;FI-90570&lt;/postnumber&gt;</div>
<div class="line">            &lt;city&gt;Oulu&lt;/city&gt;</div>
<div class="line">         &lt;/address&gt;</div>
<div class="line">         &lt;address address-identifier=&quot;Street&quot;&gt;</div>
<div class="line">            &lt;street&gt;Technology Village Road 11&lt;/street&gt;</div>
<div class="line">            &lt;entrance&gt;B 21&lt;/entrance&gt;</div>
<div class="line">            &lt;postnumber&gt;FI-90570&lt;/postnumber&gt;</div>
<div class="line">            &lt;city&gt;Oulu&lt;/city&gt;</div>
<div class="line">         &lt;/address&gt;</div>
<div class="line">      &lt;/addresses&gt;</div>
<div class="line">   &lt;/customer&gt;</div>
<div class="line">   &lt;customer customer-identifier=&quot;VIP&quot;&gt;</div>
<div class="line">      &lt;name&gt;Antti Juustila&lt;/name&gt;</div>
<div class="line">      &lt;id&gt;123456&lt;/id&gt;</div>
<div class="line">      &lt;type&gt;Person&lt;/type&gt;</div>
<div class="line">      &lt;addresses&gt;</div>
<div class="line">         &lt;address address-identifier=&quot;Home&quot;&gt;</div>
<div class="line">            &lt;street&gt;Grand Vista Boulevard 125&lt;/street&gt;</div>
<div class="line">            &lt;entrance&gt;A1&lt;/entrance&gt;</div>
<div class="line">            &lt;postnumber&gt;JE3-10560&lt;/postnumber&gt;</div>
<div class="line">            &lt;city&gt;St Brelades&lt;/city&gt;</div>
<div class="line">         &lt;/address&gt;</div>
<div class="line">         &lt;address address-identifier=&quot;Work&quot;&gt;</div>
<div class="line">            &lt;street&gt;Linnanmaa&lt;/street&gt;</div>
<div class="line">            &lt;entrance&gt;R&lt;/entrance&gt;</div>
<div class="line">            &lt;postnumber&gt;FI-90014&lt;/postnumber&gt;</div>
<div class="line">            &lt;city&gt;Oulun yliopisto&lt;/city&gt;</div>
<div class="line">         &lt;/address&gt;</div>
<div class="line">      &lt;/addresses&gt;</div>
<div class="line">   &lt;/customer&gt;</div>
<div class="line">&lt;/customers&gt;</div>
<div class="line"> </div>
<div class="line">Marshal objects to JSON...</div>
<div class="line"> </div>
<div class="line">[</div>
<div class="line">   {</div>
<div class="line">      &quot;customer-description&quot; : &quot;Key customer&quot;,</div>
<div class="line">      &quot;name&quot; : &quot;FooBar Ltd&quot;,</div>
<div class="line">      &quot;id&quot; : &quot;9897765&quot;,</div>
<div class="line">      &quot;type&quot; : &quot;Company&quot;,</div>
<div class="line">      &quot;addresses&quot; : [</div>
<div class="line">         {</div>
<div class="line">            &quot;address-description&quot; : &quot;Billing&quot;,</div>
<div class="line">            &quot;street&quot; : &quot;Technovillage Post Office&quot;,</div>
<div class="line">            &quot;postnumber&quot; : &quot;FI-90570&quot;,</div>
<div class="line">            &quot;city&quot; : &quot;Oulu&quot;</div>
<div class="line">         },</div>
<div class="line">         {</div>
<div class="line">            &quot;address-description&quot; : &quot;Street&quot;,</div>
<div class="line">            &quot;street&quot; : &quot;Technology Village Road 11&quot;,</div>
<div class="line">            &quot;entrance&quot; : &quot;B 21&quot;,</div>
<div class="line">            &quot;postnumber&quot; : &quot;FI-90570&quot;,</div>
<div class="line">            &quot;city&quot; : &quot;Oulu&quot;</div>
<div class="line">         }</div>
<div class="line">      ]</div>
<div class="line">   },</div>
<div class="line">   {</div>
<div class="line">      &quot;customer-description&quot; : &quot;VIP&quot;,</div>
<div class="line">      &quot;name&quot; : &quot;Antti Juustila&quot;,</div>
<div class="line">      &quot;id&quot; : &quot;123456&quot;,</div>
<div class="line">      &quot;type&quot; : &quot;Person&quot;,</div>
<div class="line">      &quot;addresses&quot; : [</div>
<div class="line">         {</div>
<div class="line">            &quot;address-description&quot; : &quot;Home&quot;,</div>
<div class="line">            &quot;street&quot; : &quot;Grand Vista Boulevard 125&quot;,</div>
<div class="line">            &quot;entrance&quot; : &quot;A1&quot;,</div>
<div class="line">            &quot;postnumber&quot; : &quot;JE3-10560&quot;,</div>
<div class="line">            &quot;city&quot; : &quot;St Brelades&quot;</div>
<div class="line">         },</div>
<div class="line">         {</div>
<div class="line">            &quot;address-description&quot; : &quot;Work&quot;,</div>
<div class="line">            &quot;street&quot; : &quot;Linnanmaa&quot;,</div>
<div class="line">            &quot;entrance&quot; : &quot;R&quot;,</div>
<div class="line">            &quot;postnumber&quot; : &quot;FI-90014&quot;,</div>
<div class="line">            &quot;city&quot; : &quot;Oulun yliopisto&quot;</div>
<div class="line">         }</div>
<div class="line">      ]</div>
<div class="line">   }</div>
<div class="line">]</div>
<div class="line"> </div>
<div class="line">Marshal objects to GraphViz file in graph.gv...</div>
<div class="line"> </div>
<div class="line">Cloning root entity and removing customer Antti Juustila from clone...</div>
<div class="line"> </div>
<div class="line">Marshal objects to XML...</div>
<div class="line"> </div>
<div class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</div>
<div class="line">&lt;customers&gt;</div>
<div class="line">   &lt;customer customer-identifier=&quot;Key customer&quot;&gt;</div>
<div class="line">      &lt;name&gt;FooBar Ltd&lt;/name&gt;</div>
<div class="line">      &lt;id&gt;9897765&lt;/id&gt;</div>
<div class="line">      &lt;type&gt;Company&lt;/type&gt;</div>
<div class="line">      &lt;addresses&gt;</div>
<div class="line">         &lt;address address-identifier=&quot;Billing&quot;&gt;</div>
<div class="line">            &lt;street&gt;Technovillage Post Office&lt;/street&gt;</div>
<div class="line">            &lt;postnumber&gt;FI-90570&lt;/postnumber&gt;</div>
<div class="line">            &lt;city&gt;Oulu&lt;/city&gt;</div>
<div class="line">         &lt;/address&gt;</div>
<div class="line">         &lt;address address-identifier=&quot;Street&quot;&gt;</div>
<div class="line">            &lt;street&gt;Technology Village Road 11&lt;/street&gt;</div>
<div class="line">            &lt;entrance&gt;B 21&lt;/entrance&gt;</div>
<div class="line">            &lt;postnumber&gt;FI-90570&lt;/postnumber&gt;</div>
<div class="line">            &lt;city&gt;Oulu&lt;/city&gt;</div>
<div class="line">         &lt;/address&gt;</div>
<div class="line">      &lt;/addresses&gt;</div>
<div class="line">   &lt;/customer&gt;</div>
<div class="line">&lt;/customers&gt;</div>
<div class="line"> </div>
<div class="line">Marshal objects to JSON...</div>
<div class="line"> </div>
<div class="line">[</div>
<div class="line">   {</div>
<div class="line">      &quot;customer-description&quot; : &quot;Key customer&quot;,</div>
<div class="line">      &quot;name&quot; : &quot;FooBar Ltd&quot;,</div>
<div class="line">      &quot;id&quot; : &quot;9897765&quot;,</div>
<div class="line">      &quot;type&quot; : &quot;Company&quot;,</div>
<div class="line">      &quot;addresses&quot; : [</div>
<div class="line">         {</div>
<div class="line">            &quot;address-description&quot; : &quot;Billing&quot;,</div>
<div class="line">            &quot;street&quot; : &quot;Technovillage Post Office&quot;,</div>
<div class="line">            &quot;postnumber&quot; : &quot;FI-90570&quot;,</div>
<div class="line">            &quot;city&quot; : &quot;Oulu&quot;</div>
<div class="line">         },</div>
<div class="line">         {</div>
<div class="line">            &quot;address-description&quot; : &quot;Street&quot;,</div>
<div class="line">            &quot;street&quot; : &quot;Technology Village Road 11&quot;,</div>
<div class="line">            &quot;entrance&quot; : &quot;B 21&quot;,</div>
<div class="line">            &quot;postnumber&quot; : &quot;FI-90570&quot;,</div>
<div class="line">            &quot;city&quot; : &quot;Oulu&quot;</div>
<div class="line">         }</div>
<div class="line">      ]</div>
<div class="line">   }</div>
<div class="line">]</div>
</div><!-- fragment --><h1>Who made this</h1>
<p>Original idea and implementation by Toni Räisänen (trai), redesigned and implemented by Antti Juustila.</p>
<p>INTERACT Research Group, Study Program of Information Processing Science, University of Oulu, Finland. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
